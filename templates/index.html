{% extends "layout.html" %}

{% block head %}{% endblock %}

{% block body %}
<!-- Welcome Header -->
<div class="container-fluid">
  <div class="row dashboard-header white-bg">
    <div class="col-sm-12 text-center">
      <h2>Welcome</h2>
      <small>Your account information is below.</small>
    </div>
  </div>
</div>
<!-- Account Information -->
<div class="container-fluid account-info white-bg">
  <div class="row">
    <!-- Account Balances -->
    <div class="col-sm-12 col-md-4">
      <h5 class="text-center">Depository Account Balances</h5>
      <table class="table table-striped">
        <thead>
          <tr>
            <th><strong>Account</strong></th>
            <th><strong>Balance</strong></th>
          </tr>
        </thead>
        <tbody>
          {% for account in accounts | selectattr("type", "equalto", "depository") %}
          <tr>
            <td>{{ account.name }}</td>
            <td>${{ account.balance }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <!-- Savings Progress Bar -->
    <div class="col-sm-12 col-md-3">
      <h5 class="text-center">Savings Progress</h5>
      <div class="progress active">
        <div class="progress-bar" role="progressbar"></div>
      </div>
      <p class="savings-prog"></p>
      <p class="savings-text">saved of your <span class="savings-goal"></span> goal!</p>
    </div>
    <div class="col-md-5 col-sm-12">
      <h5 class="text-center">Spending Breakdown</h5>
        <div id="expenses_chart"></div>
        <p class="text-center">TOTAL SPENT: <a id="spending_total"></a></p>
    </div>
  </div>
  <div class="row">
    <!-- Net Worth Summary -->
    <div class="col-md-7 col-sm-12">
      <h5 class="text-center">Net Worth Summary</h5>
        <div class="row" id="chart_row">
          <div class="col-md-4 col-sm-12" id="net_worth_text">
            <h4>NET WORTH:</h4>
          </div>
          <div class="col-md-4 col-sm-12">
            <div id="assets_chart"></div>
          </div>
          <div class="col-md-4 col-sm-12">
            <div id="liabilities_chart"></div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4 col-sm-6" id="net_worth_amt">
            <h4 id="net_worth_val"></h4>
          </div>
          <div class="col-md-4 col-sm-6">
            <h7>TOTAL ASSETS: <a id="assets_total"></a></h7>
            <table class="table table-striped" id="asset_table">
              <thead>
                <tr>
                  <th><strong>Account</strong></th>
                  <th><strong>Balance</strong></th>
                </tr>
              </thead>
            </table> 
          </div>
          <div class="col-sm-4">
           <h7>TOTAL LIABILITIES: <a id="liabilities_total"></a></h7>
            <table class="table table-striped" id="liability_table">
              <thead>
                <tr>
                  <th><strong>Account</strong></th>
                  <th><strong>Balance</strong></th>
                </tr>
              </thead>
            </table> 
          </div>
        </div>
    </div>
    <div class="col-md-5 col-sm-12">
      <h6 class="text-center">Transactions (past 30 days)</h6>
      <table class="table table-striped table-sm" id="transaction_table">
        <thead>
          <tr>
            <th><strong>Date</strong></th>
            <th><strong>Name</strong></th>
            <th><strong>Category</strong></th>
            <th><strong>Amount</strong></th>
          </tr>
        </thead>
      </table>
    </div>
  </div>
</div>
<!-- Dashboard Content -->
<div class="container dashboard-content">
  <div class="row">
    <div class="col-lg-12">
      <div class="row">
        <div class="col-lg-4">
          <div class="dashboard-col spending-breakdown">
            <div class="dashboard-col-title">
              <h6>New spending data!</h6>
              <i class="fas fa-search-dollar spending-icon"></i>
            </div>
            <div class="dashboard-col-content">
            </div>
          </div>
        </div>
        <div class="col-lg-4">
          <div class="dashboard-col">
            <div class="dashboard-col-title">
              <h6>New spending data!</h6>
              <i class="fas fa-search-dollar spending-icon"></i>
            </div>
            <div class="dashboard-col-content">
            </div>
          </div>
        </div>
        <div class="col-lg-4">
          <div class="dashboard-col spending">
            <div class="dashboard-col-title">
              <h6>New spending data!</h6>
              <i class="fas fa-search-dollar spending-icon"></i>
            </div>
            <div class="dashboard-col-content">
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>

<!-- Google charts file --> 
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript" src="{{url_for('static', filename='javascript/index.js')}}"></script>
<script type="text/javascript">
  accounts = net_worth_calc({{accounts|tojson}})
  accounts = prog_bar({{accounts|tojson}})
  transactions = spending_breakdown({{transactions|tojson}})
</script>

{% endblock %}